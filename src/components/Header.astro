---
/**
 * Header Component
 * Per ANS-486: "Header menu - Nearly perfect, minimal changes"
 * Using ghost button variant for softer appearance
 */
const currentPath = Astro.url.pathname;

const navLinks = [
  { href: '/customers', label: 'Customers' },
  { href: '/trust', label: 'Trust' },
  { href: '/architecture', label: 'Architecture' },
  { href: '/blog', label: 'Blog' },
  { href: '/open-source', label: 'Open Source' },
  { href: '/careers', label: 'Careers' },
];
---

<header class="border-b-2 border-navy-900 bg-white sticky top-0 z-50">
  <div class="container mx-auto px-6">
    <div class="flex items-center justify-between py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2 uppercase tracking-tight font-display font-bold text-navy-900 hover:no-underline">
        <img src="/logo.svg" alt="" width="24" height="24" class="w-6 h-6" />
        <span class="crt-text">AnswerLayer</span>
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center gap-6">
        {navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              'uppercase text-sm tracking-wide font-mono hover:underline transition-colors',
              currentPath === link.href || currentPath.startsWith(link.href + '/')
                ? 'text-navy-900 font-bold'
                : 'text-gray-600 hover:text-navy-900'
            ]}
          >
            {link.label}
          </a>
        ))}
        <a
          href="/install"
          class="inline-flex items-center justify-center uppercase tracking-wide font-display font-semibold text-sm px-4 py-2 border-2 border-navy-900 text-navy-900 hover:bg-navy-900 hover:text-white transition-all duration-150 hover:no-underline"
        >
          Install
        </a>
      </nav>

      <!-- Mobile Menu Toggle -->
      <button
        class="md:hidden border-2 border-navy-900 px-4 py-2 uppercase text-sm font-display font-semibold hover:bg-navy-900 hover:text-white transition-colors"
        id="nav-toggle"
        aria-label="Toggle navigation"
        aria-expanded="false"
      >
        Menu
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav
      class="hidden md:hidden flex-col gap-2 pb-4 border-t border-gray-200 pt-4"
      id="mobile-nav"
    >
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'uppercase text-sm tracking-wide font-mono py-2 hover:underline',
            currentPath === link.href || currentPath.startsWith(link.href + '/')
              ? 'text-navy-900 font-bold'
              : 'text-gray-600'
          ]}
        >
          {link.label}
        </a>
      ))}
      <a
        href="/install"
        class="inline-flex items-center justify-center uppercase tracking-wide font-display font-semibold text-sm px-4 py-2 mt-2 border-2 border-navy-900 text-navy-900 hover:bg-navy-900 hover:text-white transition-colors"
      >
        Install
      </a>
    </nav>
  </div>
</header>

<script>
  const toggle = document.getElementById('nav-toggle');
  const mobileNav = document.getElementById('mobile-nav');

  toggle?.addEventListener('click', () => {
    const isOpen = mobileNav?.classList.contains('flex');

    if (isOpen) {
      mobileNav?.classList.remove('flex');
      mobileNav?.classList.add('hidden');
      toggle.setAttribute('aria-expanded', 'false');
    } else {
      mobileNav?.classList.remove('hidden');
      mobileNav?.classList.add('flex');
      toggle.setAttribute('aria-expanded', 'true');
    }
  });
</script>
